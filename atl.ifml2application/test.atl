-- @nsURI OurMM=http://www.application.org
-- @nsURI ifmlMM=http://www.omg.org/spec/20130218/core
-- @nsURI extMM=http://www.omg.org/spec/20130218/ext

module test;
create ourm : OurMM from ifmlm : ifmlMM, extm : extMM

rule ViewElement2Anchor{
	from
		ifmlm : extMM!OnSelectEvent
	to
		ourm : OurMM!Anchor(
				hypRef <- extMM!OnSelectEvent.allInstances()->select(e | e.oclIsKindOf(ifmlMM!NavigationFlow))
                                                			->collect(e| e.id)
 														 -- ->collect(e | e.name)	
				
		)
}

--un NavigationFlow es un InteractionFlow
--todos los interactionFlow tienen un targetInteractionFlowElement
--esto es lo que tengo que conseguir


-- un targetInteractionFlowElement es un InteractionFlowElement
-- un InteractionFlowElement son Actions, Events, ViewElements y ViewComponentsParts. Qué ketchup necesitamos?
-- un event tiene un interactionFlowExpression, será este?		

helper def : unHelper (navFlow : extMM!OnSelectEvent) : String =
	navFlow.navigationFlow;

--lazy rule getNavigationFlows{
--	from
--		nf : IFMLMM!InteractionFlow(
				
				--nf.oclIsKindOf
	--		)
	--to
		-- cont : ourMM!Controller(
			--name <- nf.targetInteractionFlowElement
		--	name <- class.name,
		--	methods <- IFMLMM!IFMLAction.allInstances()
		--				->select(b|b.name.toLower().endsWith(class.name.toLower())
			--))				
--}
